var tglApiClient=new function(){var t=null,n={authDomain:"identity.thegreenlion.net",apiKey:"AIzaSyC5Fw0sHmxEg7-S1iylkQ68WN6X2rlGq8M",authDomain:"tgl-api-20e32.firebaseapp.com",databaseURL:"https://tgl-api-20e32.firebaseio.com"};firebase.initializeApp(n),this.refresh=function(t,e){firebase.app().delete().then(function(){firebase.initializeApp(n),t&&t()},function(){e&&e()})},this.auth=new function(){firebase.auth().onAuthStateChanged(function(n){t=n?n:null}),this.signInWithApiKey=function(t,n,e){this.signIn(t,"",n,e)},this.signInWithEmailAndPassword=function(t,n,e,i){var a=encodeURIComponent(t);this.signIn(a,n,e,i)},this.signIn=function(n,e,i,a){var s=firebase.auth().onAuthStateChanged(function(o){s(),o&&o.uid==n?i&&i():jQuery.ajax({type:"POST",url:"https://api.thegreenlion.net/user/"+n+"/authenticate?secret="+e,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){firebase.auth().signInWithCustomToken(n.token).then(function(n){t=n,i&&i()},function(t){a&&a(t)})},failure:function(t){a&&a(t)}})})},this.getToken=function(n,e){return null==t?void(e&&e()):void t.getToken(!1).then(function(t){n&&n(t)}).catch(function(t){e&&e(t)})},this.changePassword=function(n,e,i,a){t.getToken(!1).then(function(t){jQuery.ajax({type:"POST",url:"https://api.thegreenlion.net/user/me/secret/change/"+n+"/"+e+"?auth="+t,dataType:"json",success:i,error:a})}).catch(function(t){a&&a(t)})}},this.content=new function(){this.listContacts=function(t,n){this.listDocuments("contacts",t,n)},this.getContact=function(t,n,e){this.getDocument(t,n,e)},this.listCountries=function(t,n){this.listDocuments("countries",t,n)},this.getCountry=function(t,n,e){this.getDocument(t,n,e)},this.listLocations=function(t,n){this.listDocuments("locations",t,n)},this.getLocation=function(t,n,e){this.getDocument(t,n,e)},this.listPrograms=function(t,n){this.listDocuments("programs",t,n)},this.getProgram=function(t,n,e){this.getDocument(t,n,e)},this.listDocuments=function(n,e,i){firebase.database().ref("/users/"+t.uid).once("value").then(function(t){firebase.database().ref("/permissions/"+t.val().agentId+"/"+n).once("value").then(function(t){e&&e(Object.keys(t.val()))},function(t){i&&i(t)})},function(t){i&&i(t)})},this.getDocument=function(t,n,e){firebase.database().ref("/content/"+t).once("value").then(function(t){n&&n(t.val())},function(t){e&&e(t)})}},this.bookings=new function(){function n(n,i,a,s,o,c){t.getToken(!1).then(function(t){jQuery.ajax({type:n,url:e+i+"?auth="+t+a,data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:o,error:c})}).catch(function(t){c&&c(t)})}var e="https://api.thegreenlion.net/bookings";this.list=function(t,e,i,a){var s="&page="+e;t.hasOwnProperty("isCanceled")&&(s+="&iscanceled="+t.isCanceled),t.hasOwnProperty("dateStartBefore")&&(s+="&dateStartBefore="+t.dateStartBefore),t.hasOwnProperty("dateStartafter")&&(s+="&dateStartafter="+t.dateStartafter),t.hasOwnProperty("reference")&&(s+="&reference="+t.reference),t.hasOwnProperty("email")&&(s+="&email="+t.email),n("GET","",s,null,i,a)},this.get=function(t,e,i){n("GET","/"+t,"",null,e,i)},this.create=function(t,e,i){n("POST","","",t,e,i)},this.update=function(t,e,i,a){n("PUT","/"+t,"",e,i,a)},this.cancel=function(t,e,i){n("DELETE","/"+t,"",null,e,i)}}};