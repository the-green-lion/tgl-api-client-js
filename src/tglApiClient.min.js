var tglApiClient=new function(){var t,n={apiKey:"AIzaSyC5Fw0sHmxEg7-S1iylkQ68WN6X2rlGq8M",authDomain:"tgl-api-20e32.firebaseapp.com",databaseURL:"https://tgl-api-20e32.firebaseio.com"};firebase.initializeApp(n),this.auth=new function(){firebase.auth().onAuthStateChanged(function(n){t=n?n:null}),this.signInWithApiKey=function(t,n,i){var e=0;firebase.auth().onAuthStateChanged(function(s){var o=0==e;e++,s?n&&o&&n():$.ajax({type:"GET",url:"https://api.thegreenlion.net/AuthService.svc/LogInWithApiKey?key="+t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){firebase.auth().signInWithCustomToken(t.Token).then(function(t){n&&o&&n()},function(t){i&&o&&i(t)})},failure:function(t){i&&o&&i(t)}})})}},this.content=new function(){this.listContacts=function(t,n){this.listDocuments("contacts",t,n)},this.getContact=function(t,n,i){this.getDocument(t,n,i)},this.listCountries=function(t,n){this.listDocuments("countries",t,n)},this.getCountry=function(t,n,i){this.getDocument(t,n,i)},this.listLocations=function(t,n){this.listDocuments("locations",t,n)},this.getLocation=function(t,n,i){this.getDocument(t,n,i)},this.listPrograms=function(t,n){this.listDocuments("programs",t,n)},this.getProgram=function(t,n,i){this.getDocument(t,n,i)},this.listDocuments=function(n,i,e){firebase.database().ref("/users/"+t.uid).once("value").then(function(t){firebase.database().ref("/permissions/"+t.val().agentId+"/"+n).once("value").then(function(t){i&&i(Object.keys(t.val()))},function(t){e&&e(t)})},function(t){e&&e(t)})},this.getDocument=function(t,n,i){firebase.database().ref("/content/"+t).once("value").then(function(t){n&&n(t.val())},function(t){i&&i(t)})}}};